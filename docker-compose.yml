version: '3'

services:
  
  api:
    build: ./api
    volumes:
      - ./api:/app
      - ./.data/pip-cache:/root/.cache/pip
      - ./.data/fonts:/data/fonts
      - ./.socket:/socket
      - $ENV_PICT_DIR:/data/picts
    environment:
      APPSETTINGS: config_docker.py
      TEXT_FONT: /data/fonts/truetype/liberation/LiberationSans-Regular.ttf
      HOST_ADDR: $ENV_HOST_ADDR
    ports:
      - "$CI_LIVE_PORT:8000"
  #database:
  #  image: mysql:5.7
  #  #volumes:
  #  #  - ./.data/database:/var/lib/mysql
  #  environment:
  #    MYSQL_ROOT_PASSWORD: root
  #    MYSQL_DATABASE: root
